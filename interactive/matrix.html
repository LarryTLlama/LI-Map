<canvas id = "theCanvas">
</canvas>

<script src="/node_modules/canvas-route-map/lib/canvasRouteMap.min.js"></script>
<script>
const { createCanvas } = require('canvas')
const canvas = createCanvas(4200, 4200)
const ctx = canvas.getContext('2d')
ctx.fillStyle = "white"
ctx.fillRect(0, 0, 4200, 4200)
let lines = [
    [
        [-29.1875, -27.8125],
        [-29.1875, 26.71875],
        [27.8125, 26.71875],
        [27.8125, -27.8125],
        [-29.1875, -27.8125]

    ],
    [
        [-29.1875, -27.6875],
        [-45.3125, -27.6875],
        [-45.3125, -65.75]
    ],
    [
        [27.8125, -22.1875],
        [-29.1875, -22.1875]
    ],
    [
        [13.625, -22.1875],
        [13.625, -19.03125]
    ],
    [
        [-16.25, -27.8125],
        [-16.25, -22.1875],
        [-15.59375, -19.40625]   
    ],
    [
        [-15.625, -22.1875],
        [-15.625, 26.71875]
    ],
    [
        [-21.6875, 26.71875],
        [-21.6875, 21.5625]
    ],
    [
        [-29.1875, 21.5625],
        [0, 21.5625],
    ],
    [
        [-7.3125, 21.5],
        [-7.3125, 0.09375]
    ],
    [
        [-22.1875, 0],
        [-15.5625, 1.75],
        [-2.40625, 1.75],
        [-2.125, 1.96875],
        [-1.15625, 1.96875],
        [-1.125, 0.71875]
    ],
    [
        [-0.15625, 1.78125],
        [-1.125, 1.78125]
    ],
    [
        [-2.6875, 1.8125],
        [-2.6875, 10.9375]
    ],
    [
        [-7.375, 3.96875],
        [1.75, 3.96875],
        [1.75, 1.78125],
        [0.3125, 1.78125]
    ],
    [
        [1.25, 1.78125],
        [1.25, 0.65625]
    ],
    [
        [1.75, 2.28125],
        [7.15625, 2.28125],
        [7.15625, 26.71875]
    ],
    [
        [3.65625, 2.28125],
        [3.65625, -0.6875],
        [1.875, -0.6875],
        [1.875, -3.4375],
        [-0.21875, -3.4375],
        [-0.21875, -2.53125],
        [-0.625, -2.53125],
        [-0.625, -4.78125],
        [-1.125, -6.40625]
    ],
    [
        [-1.125, 0.15625],
        [-1.125, -27.8125]
    ],
    [
        [-1.125, -0.96875],
        [-0.15625, -0.96875]
    ],
    [
        [0.3125, -0.96875],
        [1.84375, -0.96875]
    ],
    [
        [1.25, -0.96875],
        [1.25, 0.15625]
    ],
    [
        [2.8125, 0.09375],
        [27.8125, 0.09375]
    ],
    [
        [27.8125, 2.78125],
        [7.15625, 2.78125]
    ],
    [
        [0, 3.96875],
        [0, 27.375]
    ],
    [
        [0, 22.9375],
        [7.34375, 22.9375]
    ],
    [
        [27.8125, 17.5625],
        [-7.3125, 17.5625]
    ],
    [
        [-29.1875, 12.75],
        [-10.40625, 12.75],
        [-10.40625, 13.3125],
        [-7.3125, 13.34375],

    ],
    [
        [-7.34375, 13.0625],
        [-4.21875, 13.0625],
        [-3.09375, 12.6875],
        [0, 12.6875]
    ],
    [
        [27.8125, 10.9375],
        [-29.1875, 10.9375]
    ],
    [
        [-9.6875, 12.09375],
        [-9.6875, -22.1875]
    ],
    [
        [-2.6875, 0.09375],
        [-12.96875, 0.09375],
        [-12.96875, 0],
        [-29.1875, 0]
    ],
    [
        [-17.4375, 0],
        [-17.4375, -0.875]
    ],
    [
        [-23.4375, 0],
        [-23.4375, -27.8125]
    ],
    [
        [-23.40625, -26.40625],
        [-16.25, -26.40625]
    ],
    [
        [-15.5625, -16.34375],
        [-23.4375, -16.34375]
    ],
    [
        [-6.625, 21.5],
        [-6.625, 26],
        [-6.25, 26]
    ],
    [
        [-6.375, 26],
        [-6.375, 26.71875]
    ],
    [
        [20.21875, 26.71875],
        [20.21875, 0.0625]
    ],
    [
        [-3.15625, 10.9375],
        [-3.15625, 8.15625]
    ],
    [
        [-3.625, 1.8125],
        [-3.625, -1.3125],
        [-1.125, -1.3125]
    ],
    [
        [17.634831, 2.78125],
        [17.634831, 12.125],
        [17.319094, 12.125],
        [17.319094, 17.53125],
    ]

]

function getScale() {
    return 1 / Math.pow(2, 5);
}

function toCoords(num) {
    return Math.round(num / getScale());
}

ctx.linewidth = 1;
ctx.strokeStyle = 'black'; 

lines.forEach((item) => {
    ctx.beginPath();
    ctx.moveTo(toCoords(item[0][0]) + 2100, toCoords(item[0][1]) + 2100)
    item.forEach((i) => {
        ctx.lineTo(toCoords(i[0]) + 2100, toCoords(i[1])+2100)
    })
    ctx.stroke()
    ctx.closePath()
});

const map = new canvasRouteMap.CanvasRouteMap({
 container: container,
  url: 'map.png',
  map: {
    startPoint: {
      coordinates: {x: 41, y: 442},
    },
    endPoint: {
      coordinates: {x: 833, y: 196},
    },
  },
});
</script>